<div class="card">
  <div class="card-header">
    Production Planning
    
    <span *ngIf="isEditMode" style="color: #ffc107; font-size: 14px; font-weight: normal; margin-left: 10px;">
      (Editing Plan #{{ editIndex! + 1 }})
    </span>
  </div>

  <div class="card-body">

   
    <form class="form-grid" [formGroup]="planForm" (ngSubmit)="savePlan()">

      <!-- Order ID -->
      <div class="form-field">
        <input type="text" formControlName="confirmation" placeholder=" " />
        <label>Confirmation</label>
        <small class="error" *ngIf="planForm.get('confirmation')?.touched && planForm.get('confirmation')?.invalid">
          confirmation is required
        </small>
      </div>

      <!-- Product -->
      <div class="form-field">
        <input type="text" formControlName="product" placeholder=" " />
        <label>Product Name / Code</label>
        <small class="error" *ngIf="planForm.get('product')?.touched && planForm.get('product')?.invalid">
          Product is required
        </small>
      </div>

      <!-- Planned Qty -->
      <div class="form-field">
        <input type="number" formControlName="plannedQty" placeholder=" " />
        <label>Planned Qty</label>
        <small class="error" *ngIf="planForm.get('plannedQty')?.touched && planForm.get('plannedQty')?.invalid">
          Planned Qty is required
        </small>
      </div>

      <!-- Actual Qty -->
      <div class="form-field optional">
        <input type="number" formControlName="actualQty" placeholder=" " />
        <label>Actual Qty</label>
      </div>

      <!-- Shift -->
      <div class="form-field">
        <select formControlName="shift">
          <option value="" disabled selected></option>
          <option value="Shift A">Shift A</option>
          <option value="Shift B">Shift B</option>
          <option value="Shift C">Shift C</option>
        </select>
        <label>Shift</label>
        <small class="error" *ngIf="planForm.get('shift')?.touched && planForm.get('shift')?.invalid">
          Shift is required
        </small>
      </div>

      <!-- Assigned Operator -->
      <div class="form-field">
        <select formControlName="assignedOperator">
          <option value="" disabled selected></option>
          <option value="Ramu">Ramu</option>
          <option value="Raju">Raju</option>
          <option value="Pavan">Pavan</option>
        </select>
        <label>Assigned Operator</label>
        <small class="error" *ngIf="planForm.get('assignedOperator')?.touched && planForm.get('assignedOperator')?.invalid">
          Operator is required
        </small>
      </div>

      <!-- Assigned Supervisor -->
      <div class="form-field">
        <select formControlName="assignedSupervisor">
          <option value="" disabled selected></option>
          <option value="Naga">Naga</option>
          <option value="Kumar">Kumar</option>
          <option value="Karthik">Karthik</option>
        </select>
        <label>Assigned Supervisor</label>
        <small class="error" *ngIf="planForm.get('assignedSupervisor')?.touched && planForm.get('assignedSupervisor')?.invalid">
          Supervisor is required
        </small>
      </div>

      <!-- Machine -->
      <div class="form-field">
        <select formControlName="machine">
          <option value="" disabled selected></option>
          <option value="Machine 1">Machine 1</option>
          <option value="Machine 2">Machine 2</option>
          <option value="Machine 3">Machine 3</option>
        </select>
        <label>Machine</label>
        <small class="error" *ngIf="planForm.get('machine')?.touched && planForm.get('machine')?.invalid">
          Machine is required
        </small>
      </div>

      <!-- From Date -->
      <div class="form-field">
        <input type="date" formControlName="date" placeholder=" " />
        <label>From Date</label>
        <small class="error" *ngIf="planForm.get('date')?.touched && planForm.get('date')?.invalid">
          From Date is required
        </small>
      </div>

      <!-- To Date -->
      <div class="form-field">
        <input type="date" formControlName="toDate" placeholder=" " />
        <label>To Date</label>
        <small class="error" *ngIf="planForm.get('toDate')?.touched && planForm.get('toDate')?.invalid">
          To Date is required
        </small>
      </div>

      <!-- Plant -->
      <div class="form-field">
        <select formControlName="plantCode">
          <option value="" disabled selected></option>
          <option value="Plant A">Plant A</option>
          <option value="Plant B">Plant B</option>
          <option value="Plant C">Plant C</option>
        </select>
        <label>Plant Code</label>
        <small class="error" *ngIf="planForm.get('plantCode')?.touched && planForm.get('plantCode')?.invalid">
          Plant Code is required
        </small>
      </div>

      <!-- Status -->
      <div class="form-field">
        <select formControlName="status">
          <option value="" disabled selected></option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
        <label>Status</label>
        <small class="error" *ngIf="planForm.get('status')?.touched && planForm.get('status')?.invalid">
          Status is required
        </small>
      </div>

      <!-- Save/Update Button -->
      <div class="form-buttons">
        <button type="button" *ngIf="isEditMode" class="btn-secondary" (click)="cancelEdit()">
          Cancel Edit
        </button>
        <button type="submit">
          {{ isEditMode ? 'Update Plan' : 'Save Plan' }}
        </button>
      </div>

    </form>

    <!-- âœ… Table comes below the form -->
    <div class="table-responsive tableFixHead">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Product</th>
            <th>Planned Qty</th>
            <th>Actual Qty</th>
            <th>Shift</th>
            <th>Assigned Operator</th>
            <th>Assigned Supervisor</th>
            <th>From Date</th>
            <th>To Date</th>
            <th>Machine</th>
            <th>Plant Code</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let plan of plans; let i = index" 
              [style.background-color]="editIndex === i ? '#e7f3ff' : ''">
            <td>{{ plan.orderId }}</td>
            <td>{{ plan.product }}</td>
            <td>{{ plan.plannedQty }}</td>
            <td>{{ plan.actualQty }}</td>
            <td>{{ plan.shift }}</td>
            <td>{{ plan.assignedOperator }}</td>
            <td>{{ plan.assignedSupervisor }}</td>
            <td>{{ plan.date }}</td>
            <td>{{ plan.toDate }}</td>
            <td>{{ plan.machine }}</td>
            <td>{{ plan.plantCode }}</td>
            <td>
              <span class="status-badge"
                [ngClass]="{
                  'in-progress': plan.status === 'In Progress',
                  'completed': plan.status === 'Completed'
                }">
                {{ plan.status }}
              </span>
            </td>
            <td>
              <button class="edit-btn" (click)="editPlan(i)" 
                      [disabled]="editIndex === i">
                {{ editIndex === i ? 'Editing...' : 'Edit' }}
              </button>
              <button class="delete-btn" (click)="deletePlan(i)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <p *ngIf="plans.length === 0">No production plans added yet.</p>
    </div>

  </div>
</div>
<!-- <form class="form-grid" [formGroup]="planForm" (ngSubmit)="savePlan()">
     
      
      <div class="form-field">
        <input formControlName="orderId" placeholder=" " />
        <label>Order ID</label>
        <small class="error" *ngIf="planForm.get('orderId')?.touched && planForm.get('orderId')?.invalid">
          Order ID is required
        </small>
      </div>
 
      
      <div class="form-field">
        <input formControlName="product" placeholder=" " />
        <label>Product Name / Code</label>
        <small class="error" *ngIf="planForm.get('product')?.touched && planForm.get('product')?.invalid">
          Product is required
        </small>
      </div>
 
      
      <div class="form-field">
        <input type="number" formControlName="plannedQty" placeholder=" " />
        <label>Planned Qty</label>
        <small class="error" *ngIf="planForm.get('plannedQty')?.touched && planForm.get('plannedQty')?.invalid">
          Planned Qty is required
        </small>
      </div>
 
      
      <div class="form-field">
        <input type="number" formControlName="actualQty" placeholder=" " />
        <label>Actual Qty</label>
      </div>
 
     
      <div class="form-field">
        <select formControlName="shift">
          <option value="" disabled hidden></option>
          <option>Shift A</option>
          <option>Shift B</option>
          <option>Shift C</option>
        </select>
        <label>Shift</label>
        <small class="error" *ngIf="planForm.get('shift')?.touched && planForm.get('shift')?.invalid">
          Shift is required
        </small>
      </div>
 
      
      <div class="form-field">
        <select formControlName="assignedOperator">
          <option value="" disabled hidden></option>
          <option>Ramu</option>
          <option>Raju</option>
          <option>Pavan</option>
        </select>
        <label>Assigned Operator</label>
        <small class="error" *ngIf="planForm.get('assignedOperator')?.touched && planForm.get('assignedOperator')?.invalid">
          Operator is required
        </small>
      </div>
 
      
      <div class="form-field">
        <select formControlName="assignedSupervisor">
          <option value="" disabled hidden></option>
          <option>Naga</option>
          <option>Kumar</option>
          <option>Karthik</option>
        </select>
        <label>Assigned Supervisor</label>
        <small class="error" *ngIf="planForm.get('assignedSupervisor')?.touched && planForm.get('assignedSupervisor')?.invalid">
          Supervisor is required
        </small>
      </div>
 
      
      <div class="form-field">
        <input type="date" formControlName="date" placeholder=" " />
        <label>From Date</label>
        <small class="error" *ngIf="planForm.get('date')?.touched && planForm.get('date')?.invalid">
          From Date is required
        </small>
      </div>
 
     
      <div class="form-field">
        <input type="date" formControlName="toDate" placeholder=" " />
        <label>To Date</label>
        <small class="error" *ngIf="planForm.get('toDate')?.touched && planForm.get('toDate')?.invalid">
          To Date is required
        </small>
      </div>
 
      
      <div class="form-field">
        <select formControlName="machine">
          <option value="" disabled hidden></option>
          <option>Machine 1</option>
          <option>Machine 2</option>
          <option>Machine 3</option>
        </select>
        <label>Machine</label>
        <small class="error" *ngIf="planForm.get('machine')?.touched && planForm.get('machine')?.invalid">
          Machine is required
        </small>
      </div>
 
     
      <div class="form-field">
        <select formControlName="plantCode">
          <option value="" disabled hidden></option>
          <option>Plant A</option>
          <option>Plant B</option>
          <option>Plant C</option>
        </select>
        <label>Plant Code</label>
        <small class="error" *ngIf="planForm.get('plantCode')?.touched && planForm.get('plantCode')?.invalid">
 
          Plant Code is required
        </small>
      </div>
 
      
      <div class="form-field">
        <select formControlName="status">
          <option value="" disabled hidden></option>
          <option>In Progress</option>
          <option>Completed</option>
        </select>
        <label>Status</label>
        <small class="error" *ngIf="planForm.get('status')?.touched && planForm.get('status')?.invalid">
          Status is required
        </small>
      </div>
 
     
      <div class="form-buttons">
        <button type="submit">{{ isEditMode ? 'Update Plan' : 'Add Plan' }}</button>
        <button type="button" (click)="cancelPopup()">Cancel</button>
      </div>
 
    </form> -->